<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #app {
  display: flex;
  width: 500px;
  height: 300px;
  font-family: "Open Sans", sans-serif;
  font-weight: bold;
}

.click-area {
  flex-grow: 1;

  display: flex;
  align-items: center;

  background: #950000;
  cursor: pointer;
}

.display-text {
  padding: 24px;
  width: 100%;
  text-align: center;
  font-size: 24px;
  color: #ffffff;
}

.recent-scores {
  display: flex;
  flex-direction: column;
  width: 125px;
  flex-shrink: 0;
}

.score {
  flex-grow: 1;

  display: flex;
  align-items: center;
  justify-content: center;

  padding: 16px;
}

.score:nth-child(odd) {
  background: #eeeeee;
}

    </style>
</head>
<body>
    <div id="app">
  <div class="click-area">
    <div class="display-text">Welcome. Click to start!</div>
  </div>
  <div class="recent-scores">
    <div class="score">-</div>
    <div class="score">-</div>
    <div class="score">-</div>
    <div class="score">-</div>
    <div class="score">-</div>
  </div>

  <button>Trykk her for å få gjennomsnitt score.</button>

</div>
    <script>
        const clickArea = document.querySelector(".click-area");
const displayText = document.querySelector(".display-text");
const scoreElements = document.querySelectorAll(".score");
const averageButton = document.querySelector("button");

function calculateAverage() {
  if (scoreHistory.length === 0) {
    alert("No scores to average!");
    return;
  }

  const sum = scoreHistory.reduce((acc, score) => acc + score, 0);
  const average = sum / scoreHistory.length;

  alert(`Average score: ${average.toFixed(2)} ms`);
}

const scoreHistory = [];

const minimumValue = 3000;
const maximumValue = 10000;

let msSinceEpochOnTimeout = 0;
let waitingForClick = false;

function play() {
  const msTillChange =
    Math.floor(
      Math.random() * (maximumValue - minimumValue)
    ) + minimumValue;

  // Revert the colour back to red
  clickArea.style.backgroundColor = null;

  displayText.textContent = "";

  setTimeout(() => {
    msSinceEpochOnTimeout = Date.now();

    clickArea.style.backgroundColor = "#009578";
    waitingForClick = true;
  }, msTillChange);
}

function addScore(score) {
  // add score to array in index 0
  scoreHistory.unshift(score);

  for (let i = 0; i < Math.min(scoreHistory.length, 5); i++) {
    const score = scoreHistory[i];

    scoreElements[i].textContent = `${score} ms`;
  }
}

clickArea.addEventListener("click", () => {
  if (waitingForClick) {
    const score = Date.now() - msSinceEpochOnTimeout;

    waitingForClick = false;
    displayText.textContent = `Your time was ${score} ms! Click to play again.`;

    addScore(score);
  } else {
    play();
  }
});

    </script>
</body>
</html>
